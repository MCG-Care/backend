{"openapi":"3.0.0","paths":{"/api":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/api/booking/create":{"post":{"operationId":"BookingController_createBooking","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBookingDto"}}}},"responses":{"201":{"description":"You get a 201 response if your booking is created successfully"}},"summary":"Creates a new booking","tags":["Bookings"]}},"/api/booking":{"get":{"operationId":"BookingController_getAllBookings","parameters":[],"responses":{"200":{"description":"You get a 200 response if you fetch all bookings"}},"summary":"Get all bookings","tags":["Bookings"]}},"/api/booking/my-bookings":{"get":{"operationId":"BookingController_getMyBookings","parameters":[],"responses":{"200":{"description":"Returns an array of bookings assigned to the technician"},"401":{"description":"Unauthorized - Missing or invalid token"},"403":{"description":"Forbidden - User does not have technician role"}},"summary":"Get Bookings assigned to the technician","tags":["Bookings"]}},"/api/booking/available-slots":{"get":{"operationId":"BookingController_getAvailableSlots","parameters":[{"name":"date","required":true,"in":"query","description":"Date in YYYY-MM-DD format","schema":{"example":"2025-06-08","type":"string"}}],"responses":{"200":{"description":"Returns available time slots for the given date"}},"summary":"Get available booking slots for a given date","tags":["Bookings"]}},"/api/booking/{id}/assign":{"patch":{"operationId":"BookingController_assignBooking","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the booking to assign a technician to","schema":{"type":"string"}},{"name":"technicianId","required":true,"in":"query","description":"ID of the technician to assign to the booking","schema":{"type":"string"}}],"responses":{"200":{"description":"Technician successfully assigned to the booking"}},"summary":"Assign a technician to a booking","tags":["Bookings"]}},"/api/booking/{id}/complete":{"patch":{"operationId":"BookingController_updateBooking","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteBookingDto"}}}},"responses":{"200":{"description":"Booking status updated to finished"},"401":{"description":"Unauthorized - Missing or invalid token"},"403":{"description":"Forbidden - User does not have technician role"}},"summary":"Technician updates booking status to finished","tags":["Bookings"]}},"/api/booking/{id}/service-fee":{"patch":{"operationId":"BookingController_updateServiceFee","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteBookingDto"}}}},"responses":{"200":{"description":"Service Fee Edited"},"401":{"description":"Unauthorized - Missing or invalid token"},"403":{"description":"Forbidden - User does not have technician role"}},"summary":"Technician Edit Service Fee","tags":["Bookings"]}},"/api/booking/{id}/payment":{"patch":{"operationId":"BookingController_updatePayment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePaymentDto"}}}},"responses":{"200":{"description":"Payment status has changed successfully"}},"summary":"User Make Payment","tags":["Bookings"]}},"/api/product":{"get":{"operationId":"ProductController_findAll","parameters":[],"responses":{"200":{"description":"You get a 200 response if you fetch all products"}},"summary":"Get all products","tags":["Product"]}},"/api/product/{id}":{"get":{"operationId":"ProductController_findById","parameters":[{"name":"id","required":true,"in":"path","description":"MongoDB ObjectID of the product","schema":{"example":"6643e7f4d29e3301e82a65b2","type":"string"}}],"responses":{"200":{"description":""}},"summary":"Get a product by ID","tags":["Product"]},"patch":{"operationId":"ProductController_updateProduct","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"}}}},"responses":{"200":{"description":"You get a 200 response if your product is updated successfully"}},"summary":"Update a product with product id","tags":["Product"]},"delete":{"operationId":"ProductController_deleteProduct","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"You get a 200 response if your product is deleted successfully"}},"summary":"Delete a product with product id","tags":["Product"]}},"/api/product/create":{"post":{"operationId":"ProductController_createProduct","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductDto"}}}},"responses":{"201":{"description":"You get a 201 response if your product is created successfully"}},"summary":"Creates a new product with admin token","tags":["Product"]}},"/api/product/search":{"get":{"operationId":"ProductController_searchProducts","parameters":[{"name":"keyword","required":true,"in":"query","description":"Search term for product name , brand or product model","schema":{"type":"string"}}],"responses":{"200":{"description":"List of matched products","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}},"summary":"Search products by name or brand","tags":["Product"]}},"/api/auth/signup":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTechnicianDto"}}}},"responses":{"201":{"description":"User created and JWT token returned"},"400":{"description":"Bad request or validation error"}},"summary":"Register a new user (technician or admin)","tags":["Auth"]}},"/api/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful, JWT token returned"},"401":{"description":"Invalid email or password"}},"summary":"Login with email and password","tags":["Auth"]}},"/api/admin/technicians":{"get":{"operationId":"AdminController_getAllTechnicians","parameters":[],"responses":{"200":{"description":"List of all technicians"}},"summary":"Get All Technicians","tags":["Admin CRUD Of Technicians"]}},"/api/admin/technicians/{id}":{"get":{"operationId":"AdminController_getTechnician","parameters":[{"name":"id","required":true,"in":"path","description":"Technician ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Technician found"},"404":{"description":"Technician not found"}},"summary":"Get a technician by ID","tags":["Admin CRUD Of Technicians"]},"patch":{"operationId":"AdminController_updateTechnician","parameters":[{"name":"id","required":true,"in":"path","description":"Technician ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTechnicianDto"}}}},"responses":{"200":{"description":"Technician updated successfully"},"404":{"description":"Technician not found"}},"summary":"Update a technician by ID","tags":["Admin CRUD Of Technicians"]},"delete":{"operationId":"AdminController_deleteTechnician","parameters":[{"name":"id","required":true,"in":"path","description":"Technician ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Technician deleted successfully"},"400":{"description":"Technician is assigned to a booking and cannot be deleted"},"404":{"description":"Technician not found"}},"summary":"Delete a technician by ID","tags":["Admin CRUD Of Technicians"]}}},"info":{"title":"MCG CARE Aircon Service","description":"Use the base API URL as http://localhost:3000","version":"1.0","contact":{},"termsOfService":"http://localhost:3000/terms-of-service","license":{"name":"MIT License","url":"https://github.com"}},"tags":[],"servers":[{"url":"http://localhost:3000"}],"components":{"securitySchemes":{"bearer-token":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"Authorization","description":"Enter JWT token","in":"header"}},"schemas":{"ContactInfoDto":{"type":"object","properties":{"name":{"type":"string"},"phone":{"type":"array","items":{"type":"string"}},"building":{"type":"string"},"street":{"type":"string"},"ward":{"type":"string"},"state":{"type":"string"}},"required":["name","phone","building","street","ward","state"]},"CreateBookingDto":{"type":"object","properties":{"productModel":{"type":"string"},"brandName":{"type":"string"},"serviceType":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"photos":{"type":"array","items":{"type":"string"}},"videos":{"type":"array","items":{"type":"string"}},"bookingDate":{"type":"string"},"timeSlot":{"type":"string"},"contactInfo":{"$ref":"#/components/schemas/ContactInfoDto"},"serviceFee":{"type":"number","example":2500000},"paymentStatus":{"type":"string"}},"required":["productModel","brandName","serviceType","title","description","photos","videos","bookingDate","timeSlot","contactInfo","serviceFee","paymentStatus"]},"CompleteBookingDto":{"type":"object","properties":{"serviceFee":{"type":"number","example":300000},"status":{"type":"string","example":"completed"}},"required":["serviceFee"]},"UpdatePaymentDto":{"type":"object","properties":{"paymentStatus":{"type":"string","enum":["pending","paid"],"example":"paid"}},"required":["paymentStatus"]},"CreateProductDto":{"type":"object","properties":{"name":{"type":"string"},"brand":{"type":"string"},"productModel":{"type":"string"},"description":{"type":"string"},"price":{"type":"number"},"images":{"type":"array","items":{"type":"string"}},"capacity":{"type":"string"},"productType":{"type":"string"},"warranty":{"type":"string"},"status":{"type":"string"}},"required":["name","brand","productModel","description","price","images","capacity","productType","warranty","status"]},"UpdateProductDto":{"type":"object","properties":{"name":{"type":"string"},"brand":{"type":"string"},"productModel":{"type":"string"},"description":{"type":"string"},"price":{"type":"number"},"images":{"type":"array","items":{"type":"string"}},"capacity":{"type":"string"},"productType":{"type":"string"},"warranty":{"type":"string"},"status":{"type":"string"}}},"Product":{"type":"object","properties":{}},"CreateTechnicianDto":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"role":{"type":"string"},"skills":{"type":"array","items":{"type":"string"}}},"required":["name","email","password","role","skills"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"UpdateTechnicianDto":{"type":"object","properties":{}}}}}